<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lista Usuarios</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
    <div id="lista">

    </div>

</body>
<script>
    document.addEventListener("DOMContentLoaded", function(){
        fetch("/dados/listar")
            .then(res => {
                if (!res.ok){
                    throw new Error("Erro ao listar")
                }
                return res.json()
            })
            .then(listaUsuarios => {
                const divLista = document.querySelector("#lista")
                listaUsuarios.forEach(usuario => {
                    const divUsuario = document.createElement("div")

                    const img = document.createElement("img")
                    img.src = usuario.foto;
                    img.className = "PerfilIcon"

                    const nome = document.createElement("p")
                    nome.innerHTML = usuario.nome;

                    const link = document.createElement("a")
                    link.href = "/alterarUsuario/" + usuario.id
                    link.text = "alterar"

                    divUsuario.appendChild(img);
                    divUsuario.appendChild(nome);
                    divUsuario.appendChild(link);

                    divLista.appendChild(divUsuario);


                })
            })

    })
</script>
</html>